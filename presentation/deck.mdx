import { Head, Header, Steps } from 'mdx-deck'
import { CodeSurfer } from "code-surfer"
import { nightOwl } from "@code-surfer/themes"
import { FootNote } from './components/FootNote'
import { Logo } from './components/Logo'
import { theme as myTheme } from './theme'

export const theme = myTheme

<Head>
  <title>
    üöÄ Introduction √† React.js ‚Äî @greeeg
  </title>
</Head>

<Header>
  <Logo />
</Header>

# Introduction √† React.js

HETIC P2023

---

# Hello üíÇ‚Äç‚ôÇÔ∏è

---

# Gr√©goire Mielle

- üì£ Twitter: [@greeeg](https://twitter.com/greeeg)
- üî¨ GitHub: [@greeeg](https://github.com/greeeg)
- ‚úèÔ∏è Email: [hello@greeeg.com](mailto:hello@greeeg.com)

---

<Steps>

- üë®‚Äçüíª √âtudiant en H5
- üë®‚ÄçüöÄ Software Engineer [@PayFit](https://payfit.com/en/)
- üí∏ Freelance

</Steps>

---

<Steps>

- Une expertise pour tout le monde
- Une comp√©tence pour vos futurs projets & stages
- Si vous √™tes perdu, dites-le
- Challengez-moi !

</Steps>

---

# M√©thodologie

- üìö Must read
- üçø Must watch
- ‚ö°Ô∏è Must learn
- üë®‚Äçüî¨ Action time

---

# Un peu d'histoire...

Comment fonctionne l'affichage d'une page web ?

---

import SSRDiagram from './static/ssr-diagram.png'

<img src={SSRDiagram} style={{ width: 'auto', height: '70vh' }} />

<FootNote>üìö <a href="https://www.freecodecamp.org/news/how-the-web-works-a-primer-for-newcomers-to-web-development-or-anyone-really-b4584e63585c/">Comment le web fonctionne ?</a></FootNote>

---

import ClientSideRenderingDiagram from './static/client-side-rendering-diagram.png'

<img src={ClientSideRenderingDiagram} style={{ width: 'auto', height: '70vh' }} />

---

import AndroidJqueryReact from './static/android-jquery-react.png'

<img src={AndroidJqueryReact} style={{ width: '60vw', height: 'auto', marginBottom: 40 }} />

Quel est le lien entre toutes ces technologies ?

---

# Technologies client-side

<Steps>

- Interfaces plus complexes
- Beaucoup plus d'interactions

</Steps>

---

# Les besoins c√¥t√© utilisateur ont √©volu√©

- Exp√©rience mobile (3G, offline, etc.)
- Sources de donn√©es nombreuses

<FootNote>üìö <a href="https://web.dev/">Le futur du web avec Google - Web.dev</a></FootNote>

---

import Craiglist from './static/craiglist.png'

<img src={Craiglist} style={{ height: '60vh', width: 'auto' }} />

---

import Twitter from './static/twitter.png'

<img src={Twitter} style={{ height: '60vh', width: 'auto' }} />

---

# De nouvelles solutions ont √©merg√©

- Jquery (2006)
- Angular.js (2009)
- Backbone.js (2010)
- Ember.js (2011)
- React.js (2013)
- Vue.js (2014)

---

# ü§î

<Steps>

- Comment bien les choisir ?
- Quelles diff√©rences/ressemblances ?

</Steps>

---

# üìö [State of JS - 2019 Edition](https://2019.stateofjs.com/)

---

import ReactNPMStats from './static/react-npm-stats.png'

<img src={ReactNPMStats} style={{ height: '50vh', width: 'auto' }} />

---

import ReactGitHubStats from './static/react-github-stats.png'

<img src={ReactGitHubStats} style={{ width: '80vw', height: 'auto' }} />

---

import ReactChromeStats from './static/react-chrome-stats.png'

<img src={ReactChromeStats} style={{ width: '60vw', height: 'auto' }} />

---

# React.js

A JavaScript library for building user interfaces

---

<Steps>

- Declarative
- Component-Based
- Learn Once, Write Anywhere

</Steps>

---

# Declarative vs Imperative

**Dessine un chat.** vs **Fais un trait noir, puis un arrondi vers le bas, etc.**

<FootNote>üìö <a href="https://codeburst.io/declarative-vs-imperative-programming-a8a7c93d9ad2">Declarative vs Imperative programming</a></FootNote>

---

import SheetImperative from './static/sheet-imperative.gif'

# Imperative

<img src={SheetImperative} style={{ width: '50vw', height: 'auto', marginBottom: 50 }} />

On doit effectuer un calcul √† chaque modification d'une des 2 variables qui d√©finissent "fullname"

---

import SheetDeclarative from './static/sheet-declarative.gif'

# Declarative

<img src={SheetDeclarative} style={{ width: '50vw', height: 'auto', marginBottom: 50 }} />

On d√©clare comment "fullname" est d√©fini sans jamais le modifier manuellement

---

import ComponentsTree from './static/components-tree.png'

# Component-based

<img src={ComponentsTree} style={{ width: 'auto', height: '40vh' }} />

<FootNote>üìö <a href="https://itnext.io/a-guide-to-component-driven-development-cdd-1516f65d8b55">A Guide to Component Driven Development</a></FootNote>

---

import ReactPlatforms from './static/react-platforms.png'

# Learn Once, Write Anywhere

<img src={ReactPlatforms} style={{ width: '60vw', height: 'auto' }} />

<FootNote>üçø <a href="https://reactpodcast.simplecast.fm/81">React Podcast: Evan Bacon on Expo and the Future of "Build Once; Run Anywhere"</a></FootNote>

---

# Qui l'utilise ?

- Facebook (FB.com, WhatsApp, Instagram)
- American Express
- Apple
- Baidu
- Netflix
- Uber

---

# Qui l'utilise ?

- Skype
- Tesla
- Slack
- Discord
- Walmart
- Pinterest

---

# Qui l'utilise ?

- Twitter
- PayPal
- Tinder
- AirBnB
- Dropbox
- PayFit

---

# Hello World üöÄ

---

# Comment cr√©e-t-on un √©l√©ment du DOM en Javascript ?

---

<CodeSurfer theme={nightOwl}>

```html subtitle="On recupere une reference de notre parent"
<body>
  <div id="root"></div>

  <script type="text/javascript">
    function addHelloWorld() {
      const root = document.querySelector('#root')
    }
  </script>
</body>
```

```html subtitle="On cree un element"
<body>
  <div id="root"></div>

  <script type="text/javascript">
    function addHelloWorld() {
      const root = document.querySelector('#root')
      const element = document.createElement('div')
      element.textContent = 'Hello World'
      element.className = 'container'
    }
  </script>
</body>
```

```html 1:13 subtitle="On l'ajoute dans le parent"
<body>
  <div id="root"></div>

  <script type="text/javascript">
    function addHelloWorld() {
      const root = document.querySelector('#root')
      const element = document.createElement('div')
      element.textContent = 'Hello World'
      element.className = 'container'
      root.appendChild(element)
    }
  </script>
</body>
```

</CodeSurfer>

---

# Avec React.js

---

<CodeSurfer theme={nightOwl}>

```html subtitle="On importe deux packages/librairies"
<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script type="text/javascript">

  </script>
</body>
```

```html subtitle="On recupere une reference de notre parent"
<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script type="text/javascript">
    function addHelloWorld() {
      const root = document.getElementById('root')
    }
  </script>
</body>
```

```html subtitle="On cree notre element"
<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script type="text/javascript">
    function addHelloWorld() {
      const root = document.getElementById('root')
      const element = React.createElement('div', {
        className: 'container',
        children: 'Hello World',
      })
    }
  </script>
</body>
```

```html subtitle="On l'ajoute dans le parent"
<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script type="text/javascript">
    function addHelloWorld() {
      const root = document.getElementById('root')
      const element = React.createElement('div', {
        className: 'container',
        children: 'Hello World',
      })
      ReactDOM.render(element, root)
    }
  </script>
</body>
```

</CodeSurfer>

---

# Pour utiliser React.js on a donc besoin de 2 packages

<Steps>

- **React**: Les fonctionnalit√©s permettant de d√©finir des composants React
- **React DOM**: Un moteur de rendu pour le web

</Steps>

---

<CodeSurfer theme={nightOwl}>

```html
<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script type="text/javascript">
    function addHelloWorld() {
      const root = document.getElementById('root')
      const element = React.createElement('div', {
        className: 'container',
        children: 'Hello World',
      })
      ReactDOM.render(element, root)
    }
  </script>
</body>
```

```html subtitle="Du HTML dans du Javascript ü§î"
<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function addHelloWorld() {
      const root = document.getElementById('root')
      const element = <div className="container">Hello World</div>
      ReactDOM.render(element, root)
    }
  </script>
</body>
```

</CodeSurfer>

---

# Le JSX

<Steps>

- Une extension syntaxique au Javascript
- Transpil√© par [Babel](https://babeljs.io/en/repl#?browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=MYewdgzgLgBApgGzgWzmWBeGAeAJgSwDcZgEBDCCAOTNQwCJR0z8w4AnegPgAlEEQMAOoh2CXNgD0BQlyA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=es2015%2Creact%2Cstage-2&prettier=false&targets=&version=7.8.7&externalPlugins=) en Javascript
- Permet de d√©finir des composants React simplement

</Steps>

<FootNote>üìö <a href="https://jasonformat.com/wtf-is-jsx/">WTF is JSX?</a></FootNote>

---

## ‚ö†Ô∏è Pour utiliser du **JSX**, on doit avoir Babel configur√© sur son projet

---

<CodeSurfer theme={nightOwl}>

```jsx subtitle="Mais du coup si c'est du Javascript ü§Ø"
const root = document.getElementById('root')

const element = <div className="container">Hello World</div>
ReactDOM.render(element, root)
```

```jsx
const root = document.getElementById('root')

const text = "Hello World"
const element = <div className="container">{text}</div>
ReactDOM.render(element, root)
```

```jsx
const root = document.getElementById('root')

const text = "Hello World"
const element = <div className="container">{text.toUpperCase()}</div>
ReactDOM.render(element, root)
```

```jsx
const root = document.getElementById('root')

const text = "Hello World"
const attributes = {
  className: "container",
  style: {
    color: "red"
  }
}
const element = <div {...attributes}>{text.toUpperCase()}</div>
ReactDOM.render(element, root)
```

</CodeSurfer>

---

# Les composants React.js

---

## On definit un composant comme etant un element/objet qui entre dans la composition de quelque chose 

---


<CodeSurfer theme={nightOwl}>

```jsx subtitle="Imaginons que je souhaite afficher un message dans mon application"
const root = document.getElementById('root')

const element = (
  <div className="container">
    <p className="message">Hello World</p>
  </div>
)

ReactDOM.render(element, root)
```

```jsx subtitle="Il se peut que je souhaite afficher plusieurs messages √† plusieurs endroits"
const root = document.getElementById('root')

const element = (
  <div className="container">
    <p className="message">Hello World</p>
    <p className="message">Goodbye World</p>
  </div>
)

ReactDOM.render(element, root)
```

```jsx subtitle="Je peux externaliser ce qui represente un message dans une variable"
const root = document.getElementById('root')

const message = <p className="message">Hello World</p>

const element = (
  <div className="container">
    {message}
    {message}
  </div>
)

ReactDOM.render(element, root)
```

```jsx subtitle="Et le transformer en un composant React.js"
const root = document.getElementById('root')

const message = (props) => <p className="message">{props.children}</p>

const element = (
  <div className="container">
    {React.createElement(message, { children: "Hello World" })}
    {React.createElement(message, { children: "Goodbye World" })}
  </div>
)

ReactDOM.render(element, root)
```

```jsx subtitle="En JSX, je peux l'ecrir simplement comme ceci"
const root = document.getElementById('root')

const Message = (props) => <p className="message">{props.children}</p>

const element = (
  <div className="container">
    <Message>Hello World</Message>
    <Message>Goodbye World</Message>
  </div>
)

ReactDOM.render(element, root)
```

</CodeSurfer>

---

import LegoBricks from './static/lego-bricks.png'

<img src={LegoBricks} style={{ width: '60vw', height: 'auto' }} />

---

import LegoComponentsGood from './static/lego-components-good.jpeg'
import LegoComponentsBad from './static/lego-components-bad.jpeg'

<div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }}>
  <img style={{ width: 'auto', height: '50vh', marginRight: 40 }} src={LegoComponentsGood} alt=""/>
  <img style={{ width: 'auto', height: '50vh' }} src={LegoComponentsBad} alt=""/>
</div>

---

# Les props

---

## Les props sont des param√®tres/arguments pass√©s aux composants React.js pour :

<Steps>

1. afficher quelque chose de dynamique
2. pour faire du rendu conditionnel
3. pour passer ce m√™me parametre a un composant enfant

</Steps>

---

<CodeSurfer theme={nightOwl}>

```jsx subtitle="Sans props, impossible de rendre dynamique ce que mon composant affiche"
const Profile = () => (
  <section>
    <h3>John Doe</h3>
    <p>Software Engineer</p>
  </section>
)

const App = () => (
  <Profile />
)
```

```jsx subtitle="Ici, je passe deux props qui sont utiliser dans le JSX"
const Profile = (props) => (
  <section>
    <h3>{props.name}</h3>
    <p>{props.position}</p>
  </section>
)

const App = () => (
  <Profile name="John Doe" position="Software Engineer" />
)
```

```jsx subtitle="On peut simplifer l'√©criture en destructurant l'objet props"
const Profile = ({ name, position }) => (
  <section>
    <h3>{name}</h3>
    <p>{position}</p>
  </section>
)

const App = () => (
  <Profile name="John Doe" position="Software Engineer" />
)
```

```jsx subtitle="On peut aussi s'assurer que les props respectent certaines r√®gles"
import PropTypes from 'prop-types'

const Profile = ({ name, position }) => (
  <section>
    <h3>{name}</h3>
    <p>{position}</p>
  </section>
)

Profile.propTypes = {
  name: PropTypes.string.isRequired,
  position: PropTypes.string.isRequired
}

const App = () => (
  <Profile name="John Doe" position="Software Engineer" />
)
```

</CodeSurfer>

---

# ‚ö°Ô∏èEn r√©sum√©

<Steps>

- **React.js** est une librairie pour construire des interfaces
- cr√©√©es √† partir de **briques r√©utilisables** (components)
- qui utilise une extension syntaxique appel√©e le **JSX**

</Steps>

---

# ‚ö°Ô∏èEn r√©sum√©

<Steps>

- elle s'appuie sur 2 packages (**`react`** & **`react-dom`**)
- mais peut aussi √™tre utilis√©e ailleurs (native, VR, etc.)

</Steps>


---

# Le style en React.js

---

## Il existe trois mani√®res de styliser des applications React

---

# En utilisant du CSS classique

---

<CodeSurfer theme={nightOwl}>

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <style>
    .box {
      border: 1px solid #333;
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
    }
    .box--large {
      width: 270px;
      height: 270px;
    }
    .box--medium {
      width: 180px;
      height: 180px;
    }
    .box--small {
      width: 90px;
      height: 90px;
    }
  </style>
  <script type="text/babel">
    const Box = ({ size, children}) => {
      const sizeClassName = `box--${size}`

      return (
        <div
          className={`box ${sizeClassName}`}
        >
          {children}
        </div>
      )
    }

    const element = (
      <div>
        <Box size="small">
          small lightblue box
        </Box>
        <Box size="medium">
          medium pink box
        </Box>
        <Box size="large">
          large orange box
        </Box>
      </div>
    )

    ReactDOM.render(element, document.getElementById('root'))
  </script>
</body>
```

```html 6:26
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <style>
    .box {
      border: 1px solid #333;
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
    }
    .box--large {
      width: 270px;
      height: 270px;
    }
    .box--medium {
      width: 180px;
      height: 180px;
    }
    .box--small {
      width: 90px;
      height: 90px;
    }
  </style>
  <script type="text/babel">
    const Box = ({ size, children}) => {
      const sizeClassName = `box--${size}`

      return (
        <div
          className={`box ${sizeClassName}`}
        >
          {children}
        </div>
      )
    }

    const element = (
      <div>
        <Box size="small">
          small lightblue box
        </Box>
        <Box size="medium">
          medium pink box
        </Box>
        <Box size="large">
          large orange box
        </Box>
      </div>
    )

    ReactDOM.render(element, document.getElementById('root'))
  </script>
</body>
```

```html 40:52
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <style>
    .box {
      border: 1px solid #333;
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
    }
    .box--large {
      width: 270px;
      height: 270px;
    }
    .box--medium {
      width: 180px;
      height: 180px;
    }
    .box--small {
      width: 90px;
      height: 90px;
    }
  </style>
  <script type="text/babel">
    const Box = ({ size, children}) => {
      const sizeClassName = `box--${size}`

      return (
        <div
          className={`box ${sizeClassName}`}
        >
          {children}
        </div>
      )
    }

    const element = (
      <div>
        <Box size="small">
          small lightblue box
        </Box>
        <Box size="medium">
          medium pink box
        </Box>
        <Box size="large">
          large orange box
        </Box>
      </div>
    )

    ReactDOM.render(element, document.getElementById('root'))
  </script>
</body>
```

```html 28:38
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <style>
    .box {
      border: 1px solid #333;
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
    }
    .box--large {
      width: 270px;
      height: 270px;
    }
    .box--medium {
      width: 180px;
      height: 180px;
    }
    .box--small {
      width: 90px;
      height: 90px;
    }
  </style>
  <script type="text/babel">
    const Box = ({ size, children}) => {
      const sizeClassName = `box--${size}`

      return (
        <div
          className={`box ${sizeClassName}`}
        >
          {children}
        </div>
      )
    }

    const element = (
      <div>
        <Box size="small">
          small lightblue box
        </Box>
        <Box size="medium">
          medium pink box
        </Box>
        <Box size="large">
          large orange box
        </Box>
      </div>
    )

    ReactDOM.render(element, document.getElementById('root'))
  </script>
</body>
```

</CodeSurfer>

---

# En utilisant du style inline

---

<CodeSurfer theme={nightOwl}>

```jsx
const Header = () => (
  <header style={{ marginTop: 20, fontSize: 17 }}>
    <div style={{ paddingLeft: 10 }}>
      <img src="/assets/logo.png" style={{ width: 100, height: 'auto' }} />
    </div>
  </header>
);
export default Header;
```

</CodeSurfer>

---

# En utilisant des librairies de **CSS-in-JS**
(Nous reviendrons dessus plus tard)

<FootNote>üìö <a href="https://2019.stateofcss.com/technologies/css-in-js/">State of CSS - 2019 Edition</a></FootNote>

---

<CodeSurfer theme={nightOwl}>

```jsx
import React from 'react'
import styled from '@emotion/styled'

const Button = styled.button`
  color: turquoise;
`

export default Button;
```

</CodeSurfer>

---

# üë®‚Äçüî¨ Construire sa premi√®re interface React.js

---

# Gestion des √©v√®nements

---

## De mani√®re g√©n√©rale, on utilise le Javascript pour dynamiser des pages web :

- Pour cr√©er des interactions (Click, Keydown, etc)
- Pour cr√©er des animations
- Et bien plus (AJAX, WebGL, Web APIs, etc.)

---

<CodeSurfer theme={nightOwl}>

```jsx subtitle="On r√©cup√®re l'√©l√©ment sur lequel on souhaite greffer l'√©venement"
const input = document.querySelector('input')
```

```jsx subtitle="On ajoute un √©couteur d'√©venement sur cet √©l√©ment"
const input = document.querySelector('input')

input.addEventListener('keyup', e => {
  
})
```

```jsx subtitle="On y ajoute la logique voulue"
const input = document.querySelector('input')

input.addEventListener('keyup', e => {
  const text = e.target.value

  if (text.length > 10) {
    alert('This is way too long')
  } else {
    document.title = `(${text}) Learning Javascript`
  }
})
```

```jsx
const input = document.querySelector('input')

input.addEventListener('keyup', e => {
  const text = e.target.value

  if (text.length > 10) {
    alert('This is way too long')
  } else {
    document.title = `(${text}) Learning Javascript`
  }
})
```

</CodeSurfer>

---


<CodeSurfer theme={nightOwl}>

```jsx subtitle="On cr√©e notre composant"
const TextInput = () => {
  return (
    <input type="text" />
  )
}

const App = () => (
  <TextInput />
)
```

```jsx subtitle="On ajoute un √©couteur d'√©venement sur l'√©l√©ment du DOM qui nous int√©resse"
const TextInput = () => {
  const onChange = () => {

  }

  return (
    <input type="text" onKeyUp={onChange} />
  )
}

const App = () => (
  <TextInput />
)
```

```jsx subtitle="On y ajoute la logique voulue"
const TextInput = () => {
  const onChange = e => {
    const text = e.target.value

    if (text.length > 10) {
      alert('This is way too long')
    } else {
      document.title = `(${text}) Learning Javascript`
    }
  }

  return (
    <input type="text" onKeyUp={onChange} />
  )
}

const App = () => (
  <TextInput />
)
```

```jsx
const TextInput = () => {
  const onChange = e => {
    const text = e.target.value

    if (text.length > 10) {
      alert('This is way too long')
    } else {
      document.title = `(${text}) Learning Javascript`
    }
  }

  return (
    <input type="text" onKeyUp={onChange} />
  )
}

const App = () => (
  <TextInput />
)
```

</CodeSurfer>

---


